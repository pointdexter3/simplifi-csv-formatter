

- Extract common code into reusable functions 
    (minimal logic changes)


End goal:
- adding additional institutions should require no code changes, defaulting to a common script.
- budget application agnostic (Simplifi formatting after normalization should be swappable)


Generalize logic: 

- remove strangeness
    - commas between quotes (remove them)
    - check if columns already have quotes (if so, remove them)
    - special characters like $
    - [C/W], [D/N]
    - convert multiple spaces to single space
    
- should support cross currency accounts (adding currency prefix should be an option, though Simplifi has no concept of currency type USD/CAD/etc other applications that use this may / or if I decide to switch budget apps).

- Extract the Simplifi specific logic so it is more application agnostic.

HEADER:
- remove header and padding lines (also remove non-header titles like BMO)
- add Simplify Header



DETERMINE COLUMNS
- scan header to determine amounts / credit amount / debit amount / posted date / transaction date 
- if not, or scanned header doesn't pass test, scan individual columns using regex to determine columns
- for both, determine column formats
- if multiple date columns, keep the later one (posted date)
- if separate Debit and Credit columns, figure out which is which, invert amount, combine (RBC/TD)
- Determine when amounts should be inverted(?) (BMO-CC)


Dates:
- convert dates to YYYY-MM-DD. Filter. convert to Simplifi format (MM/DD/YYYY)

- normalize dates to common format (find bank format)
    start with the ones I know:
    - DD/MM/YYYY
    - MM/DD/YYYY
    - YYYY-MM-DD
    - YYYYMMDD






